Index: 08_ExceptionsDebuggingAndTesting/homework_8.1/ConsoleCustomerList/src/main/java/Main.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import java.util.Scanner;\r\n\r\npublic class Main {\r\n    private static final String ADD_COMMAND = \"add Василий Петров \" +\r\n            \"vasily.petrov@gmail.com +79215637722\";\r\n    private static final String COMMAND_EXAMPLES = \"\\t\" + ADD_COMMAND + \"\\n\" +\r\n            \"\\tlist\\n\\tcount\\n\\tremove Василий Петров\";\r\n    private static final String COMMAND_ERROR = \"Wrong command! Available command examples: \\n\" +\r\n            COMMAND_EXAMPLES;\r\n    private static final String helpText = \"Command examples:\\n\" + COMMAND_EXAMPLES;\r\n\r\n    public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n        CustomerStorage executor = new CustomerStorage();\r\n\r\n        while (true) {\r\n            String command = scanner.nextLine();\r\n            String[] tokens = command.split(\"\\\\s+\", 2);\r\n\r\n            if (tokens[0].equals(\"add\")) {\r\n                executor.addCustomer(tokens[1]);\r\n            } else if (tokens[0].equals(\"list\")) {\r\n                executor.listCustomers();\r\n            } else if (tokens[0].equals(\"remove\")) {\r\n                executor.removeCustomer(tokens[1]);\r\n            } else if (tokens[0].equals(\"count\")) {\r\n                System.out.println(\"There are \" + executor.getCount() + \" customers\");\r\n            } else if (tokens[0].equals(\"help\")) {\r\n                System.out.println(helpText);\r\n            } else {\r\n                System.out.println(COMMAND_ERROR);\r\n            }\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- 08_ExceptionsDebuggingAndTesting/homework_8.1/ConsoleCustomerList/src/main/java/Main.java	(revision 6aed635413ceece224a402240a50113da154a85c)
+++ 08_ExceptionsDebuggingAndTesting/homework_8.1/ConsoleCustomerList/src/main/java/Main.java	(date 1611747409499)
@@ -17,18 +17,26 @@
             String command = scanner.nextLine();
             String[] tokens = command.split("\\s+", 2);
 
-            if (tokens[0].equals("add")) {
-                executor.addCustomer(tokens[1]);
-            } else if (tokens[0].equals("list")) {
-                executor.listCustomers();
-            } else if (tokens[0].equals("remove")) {
-                executor.removeCustomer(tokens[1]);
-            } else if (tokens[0].equals("count")) {
-                System.out.println("There are " + executor.getCount() + " customers");
-            } else if (tokens[0].equals("help")) {
-                System.out.println(helpText);
-            } else {
-                System.out.println(COMMAND_ERROR);
+            try {
+                if (tokens[0].equals("add")) {
+                    executor.addCustomer(tokens[1]);
+                } else if (tokens[0].equals("list")) {
+                    executor.listCustomers();
+                } else if (tokens[0].equals("remove")) {
+                    executor.removeCustomer(tokens[1]);
+                } else if (tokens[0].equals("count")) {
+                    System.out.println("There are " + executor.getCount() + " customers");
+                } else if (tokens[0].equals("help")) {
+                    System.out.println(helpText);
+                } else {
+                    System.out.println(COMMAND_ERROR);
+                }
+            } catch (Exception e) {
+                e.printStackTrace();
+
+                //ArrayIndexOutOfBoundsException - Index 1 out of bounds for length 1
+                //
+
             }
         }
     }
Index: 08_ExceptionsDebuggingAndTesting/homework_8.1/ConsoleCustomerList/src/main/java/CustomerStorage.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class CustomerStorage {\r\n    private final Map<String, Customer> storage;\r\n\r\n    public CustomerStorage() {\r\n        storage = new HashMap<>();\r\n    }\r\n\r\n    public void addCustomer(String data) {\r\n        final int INDEX_NAME = 0;\r\n        final int INDEX_SURNAME = 1;\r\n        final int INDEX_EMAIL = 2;\r\n        final int INDEX_PHONE = 3;\r\n\r\n        String[] components = data.split(\"\\\\s+\");\r\n        String name = components[INDEX_NAME] + \" \" + components[INDEX_SURNAME];\r\n        storage.put(name, new Customer(name, components[INDEX_PHONE], components[INDEX_EMAIL]));\r\n    }\r\n\r\n    public void listCustomers() {\r\n        storage.values().forEach(System.out::println);\r\n    }\r\n\r\n    public void removeCustomer(String name) {\r\n        storage.remove(name);\r\n    }\r\n\r\n    public Customer getCustomer(String name) {\r\n        return storage.get(name);\r\n    }\r\n\r\n    public int getCount() {\r\n        return storage.size();\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- 08_ExceptionsDebuggingAndTesting/homework_8.1/ConsoleCustomerList/src/main/java/CustomerStorage.java	(revision 6aed635413ceece224a402240a50113da154a85c)
+++ 08_ExceptionsDebuggingAndTesting/homework_8.1/ConsoleCustomerList/src/main/java/CustomerStorage.java	(date 1611748359623)
@@ -8,13 +8,27 @@
         storage = new HashMap<>();
     }
 
-    public void addCustomer(String data) {
+    public void addCustomer(String data)  {
         final int INDEX_NAME = 0;
         final int INDEX_SURNAME = 1;
         final int INDEX_EMAIL = 2;
         final int INDEX_PHONE = 3;
 
         String[] components = data.split("\\s+");
+        if (components.length != 4) {
+            throw new ArrayIndexOutOfBoundsException("Неверный формат комманды");
+        }
+
+        String email = components[2];
+        if (!email.matches("^.+@.+\\.ru$")) {
+            throw new IllegalArgumentException("Неверный формат e-mail");
+        }
+
+        String phone = components[3];
+        if (!phone.matches("^7.{10}$")) {
+            throw new IllegalArgumentException("Неверный формат номера");
+        }
+
         String name = components[INDEX_NAME] + " " + components[INDEX_SURNAME];
         storage.put(name, new Customer(name, components[INDEX_PHONE], components[INDEX_EMAIL]));
     }
